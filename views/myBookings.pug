extends base

block content
  main.main
    .container
      .user-view
        nav.user-view__menu
          ul.side-nav
            +navItem('/me', 'Settings', 'settings')
            +navItem('/my-bookings', 'My bookings', 'briefcase', true)
            +navItem('/my-reviews', 'My reviews', 'star')
            +navItem('#', 'Billing', 'credit-card')

          - if (user && user.role === 'admin')
            .admin-nav
              h5.admin-nav__heading Admin
              ul.side-nav
                +navItem('/admin/tours', 'Manage tours', 'map')
                +navItem('/admin/users', 'Manage users', 'users')
                +navItem('/admin/reviews', 'Manage reviews', 'star')
                +navItem('/admin/bookings', 'Manage bookings', 'briefcase')

        .user-view__content
          .bookings-container
            h2.heading-secondary.ma-bt-lg My Bookings
            if bookings && bookings.length > 0
              each booking in bookings
                .booking-card
                  .booking-card__header
                    h3.booking-card__title= booking.tour.name
                    span.booking-card__status(class=`booking-card__status--${booking.status}`)= booking.status
                  .booking-card__body
                    .booking-card__info
                      p
                        strong Start Date: 
                        span= new Date(booking.startDate).toLocaleDateString()
                      p
                        strong End Date: 
                        span= new Date(booking.endDate).toLocaleDateString()
                      p
                        strong Price: 
                        span= `$${booking.price}`
                    .booking-card__actions
                      if booking.status === 'pending'
                        button.btn.btn--small.btn--yellow Cancel Booking
                      else if booking.status === 'confirmed'
                        button.btn.btn--small.btn--green Download Itinerary
            else
              p You have no bookings yet. 
                a(href='/') Browse tours
                |  to book your first adventure!